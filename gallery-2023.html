<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tozan August 2023 Gallery - Sacred Pilgrimage Memories</title>
  
  <!-- Meta Tags -->
  <meta name="description" content="Beautiful photo gallery from our Tozan pilgrimage to Taisekiji Head Temple in August 2023. Sacred memories from Japan.">
  <meta name="keywords" content="Tozan, Nichiren Shoshu, Taisekiji, pilgrimage, Japan, Mt. Fuji, Buddhist temple">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“¸</text></svg>">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  
  <!-- GLightbox CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="assets/css/style.css">

  <style>
    /* Modern Gallery Styles */
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.1);
      --shadow-medium: 0 8px 25px rgba(0, 0, 0, 0.15);
      --shadow-heavy: 0 12px 35px rgba(0, 0, 0, 0.2);
      --border-radius: 15px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6;
    }

    /* Header Styles */
    .gallery-header {
      background: var(--primary-gradient);
      color: white;
      padding: 4rem 0 3rem;
      margin-bottom: 2rem;
      position: relative;
      overflow: hidden;
    }

    .gallery-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
      opacity: 0.3;
    }

    .gallery-header .container {
      position: relative;
      z-index: 2;
    }

    .gallery-title {
      font-size: 3.5rem;
      font-weight: 800;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .gallery-subtitle {
      font-size: 1.25rem;
      opacity: 0.95;
      margin-bottom: 2rem;
    }

    .gallery-stats {
      display: flex;
      gap: 2rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .stat-item {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 1rem 2rem;
      border-radius: var(--border-radius);
      border: 1px solid rgba(255, 255, 255, 0.3);
      text-align: center;
      transition: var(--transition);
    }

    .stat-item:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      display: block;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* Back Button */
    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      background: var(--primary-gradient) !important;
      border: none !important;
      color: white !important;
      padding: 12px 20px;
      border-radius: 50px;
      box-shadow: var(--shadow-medium);
      transition: var(--transition);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
    }

    .back-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-heavy);
      color: white !important;
    }

    /* Filter Navigation */
    .filter-nav {
      background: white;
      border-radius: var(--border-radius);
      padding: 1.5rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow-light);
      position: sticky;
      top: 20px;
      z-index: 100;
    }

    .filter-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .filter-btn {
      background: #f8f9fa;
      border: 2px solid transparent;
      color: #6c757d;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      transition: var(--transition);
      font-weight: 500;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .filter-btn:hover,
    .filter-btn.active {
      background: var(--primary-gradient);
      color: white;
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
      text-decoration: none;
    }

    /* Gallery Categories */
    .gallery-category {
      margin-bottom: 4rem;
      opacity: 1;
      transform: translateY(0);
    }

    .gallery-category:nth-child(even) {
      animation-delay: 0.1s;
    }

    .gallery-category:nth-child(odd) {
      animation-delay: 0.2s;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .category-title {
      font-size: 2rem;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      padding-bottom: 1rem;
      border-bottom: 3px solid #e9ecef;
      position: relative;
    }

    .category-title::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--primary-gradient);
      border-radius: 2px;
    }

    .category-title i {
      color: #667eea;
      font-size: 1.5rem;
    }

    .photo-count {
      font-size: 1rem;
      color: #6c757d;
      font-weight: 400;
      margin-left: auto;
    }

    /* Gallery Grid */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .gallery-item {
      position: relative;
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow-light);
      transition: var(--transition);
      aspect-ratio: 4/3;
      background: white;
    }

    .gallery-item:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-heavy);
    }

    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
    }

    .gallery-item:hover img {
      transform: scale(1.05);
    }

    .gallery-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--primary-gradient);
      opacity: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .gallery-item:hover .gallery-overlay {
      opacity: 0.9;
    }

    .gallery-overlay i {
      color: white;
      font-size: 2.5rem;
      transform: scale(0.8);
      transition: var(--transition);
    }

    .gallery-item:hover .gallery-overlay i {
      transform: scale(1);
    }

    /* Loading Animation */
    .loading-spinner {
      text-align: center;
      padding: 4rem;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .gallery-title {
        font-size: 2.5rem;
      }

      .gallery-stats {
        gap: 1rem;
      }

      .stat-item {
        padding: 0.75rem 1.5rem;
      }

      .filter-buttons {
        gap: 0.5rem;
      }

      .filter-btn {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }

      .gallery-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1rem;
      }

      .category-title {
        font-size: 1.5rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }

      .photo-count {
        margin-left: 0;
      }
    }

    @media (max-width: 480px) {
      .gallery-grid {
        grid-template-columns: 1fr;
      }

      .back-btn {
        padding: 10px 16px;
        font-size: 0.9rem;
      }
    }

    /* Scroll to Top Button */
    .scroll-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-medium);
      transition: var(--transition);
      opacity: 0;
      visibility: hidden;
      z-index: 1000;
    }

    .scroll-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .scroll-top:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-heavy);
    }

    /* Performance System Styles */
    .gallery-performance-enabled {
      /* Enhanced gallery with performance optimizations */
    }

    .gallery-item img.loading {
      opacity: 0.5;
      filter: blur(2px);
      transition: all 0.3s ease;
    }

    .gallery-item img.loaded {
      opacity: 1;
      filter: none;
      transition: all 0.3s ease;
    }

    .gallery-item img.error {
      opacity: 0.3;
      filter: grayscale(100%);
    }

    .gallery-item img.error::after {
      content: 'âš ï¸ Failed to load';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 0, 0, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
    }

    /* Performance Dashboard Styles */
    .performance-dashboard {
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .performance-dashboard:hover {
      background: rgba(0, 0, 0, 0.95);
    }

    /* Progressive Loading Indicators */
    .gallery-loading-enhanced {
      position: relative;
    }

    .gallery-loading-enhanced::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--primary-gradient), transparent);
      animation: loading-sweep 2s infinite;
    }

    @keyframes loading-sweep {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Memory Usage Indicator */
    .memory-usage-indicator {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 11px;
      font-family: monospace;
      z-index: 9999;
      display: none;
    }

    .memory-usage-indicator.warning {
      background: rgba(255, 165, 0, 0.9);
      color: black;
    }

    .memory-usage-indicator.critical {
      background: rgba(255, 0, 0, 0.9);
      color: white;
    }

    /* Enhanced Video Thumbnail Styles */
    .gallery-item video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .gallery-item:has(video) {
      position: relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .gallery-item:has(video)::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, 
        rgba(102, 126, 234, 0.8) 0%, 
        rgba(118, 75, 162, 0.8) 100%);
      z-index: 1;
      opacity: 0;
      transition: var(--transition);
      pointer-events: none;
    }

    .gallery-item:has(video):hover::before {
      opacity: 1;
    }

    .gallery-item:has(video) .gallery-overlay {
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(5px);
      z-index: 2;
    }

    .gallery-item:has(video) .gallery-overlay i {
      font-size: 3rem;
      color: white;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      animation: pulse 2s infinite;
      z-index: 3;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.9; }
      50% { transform: scale(1.1); opacity: 1; }
    }

    .gallery-item:has(video):hover .gallery-overlay i {
      animation: none;
      transform: scale(1.2);
    }

    /* Video Badge */
    .gallery-item:has(video)::after {
      content: 'VIDEO';
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.9);
      color: #667eea;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
      z-index: 4;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      pointer-events: none;
    }

    /* Fallback for browsers that don't support :has() */
    .video-thumbnail {
      position: relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .video-thumbnail::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, 
        rgba(102, 126, 234, 0.8) 0%, 
        rgba(118, 75, 162, 0.8) 100%);
      z-index: 1;
      opacity: 0;
      transition: var(--transition);
      pointer-events: none;
    }

    .video-thumbnail:hover::before {
      opacity: 1;
    }

    .video-thumbnail .gallery-overlay {
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(5px);
      z-index: 2;
    }

    .video-thumbnail .gallery-overlay i {
      font-size: 3rem;
      color: white;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      animation: pulse 2s infinite;
      z-index: 3;
    }

    .video-thumbnail:hover .gallery-overlay i {
      animation: none;
      transform: scale(1.2);
    }

    .video-thumbnail::after {
      content: 'VIDEO';
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.9);
      color: #667eea;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
      z-index: 4;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      pointer-events: none;
    }

    /* Ensure video links are clickable */
    .video-thumbnail > a {
      position: relative;
      z-index: 5;
      display: block;
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <!-- Back Button -->
  <a href="index.html#gallery" class="back-btn">
    <i class="bi bi-arrow-left"></i>
    <span>Back to Main</span>
  </a>

  <!-- Gallery Header -->
  <div class="gallery-header">
    <div class="container text-center">
      <h1 class="gallery-title">
        <i class="bi bi-camera-fill me-3"></i>
        Tozan August 2023
      </h1>
      <p class="gallery-subtitle">
        Sacred pilgrimage memories from our spiritual journey to Taisekiji Head Temple
      </p>
      
      <div class="gallery-stats">
        <div class="stat-item">
          <span class="stat-number">30</span>
          <span class="stat-label">Total Photos</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">2</span>
          <span class="stat-label">Categories</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">1</span>
          <span class="stat-label">Video</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Filter Navigation -->
  <div class="container">
    <div class="filter-nav">
      <div class="filter-buttons">
        <a href="#all" class="filter-btn active" data-filter="all">
          <i class="bi bi-grid-3x3-gap"></i> All Photos
        </a>
        <a href="#members-and-group-photos" class="filter-btn" data-filter="members">
          <i class="bi bi-people"></i> Members (30)
        </a>
        <a href="#videos" class="filter-btn" data-filter="videos">
          <i class="bi bi-play-circle"></i> Videos (1)
        </a>
      </div>
    </div>
  </div>

  <!-- Gallery Content -->
  <div class="container">
    <!-- Loading Spinner -->
    <div id="loading" class="loading-spinner">
      <div class="spinner"></div>
      <h4>Loading Sacred Memories...</h4>
      <p class="text-muted">Preparing your pilgrimage photo gallery</p>
    </div>

    <!-- Gallery Categories -->
    <div id="gallery-content">
    <!-- Members & Group Photos -->
    <div class="gallery-category" id="members-and-group-photos">
      <h3 class="category-title">
        <i class="bi bi-collection"></i> Members & Group Photos
        <span class="photo-count">(30 photos)</span>
      </h3>
      <div class="gallery-grid">
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-1.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-1.jpeg" alt="Tozan 2023 August Group 1" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-2.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-2.jpeg" alt="Tozan 2023 August Group 2" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-3.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-3.jpeg" alt="Tozan 2023 August Group 3" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-4.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-4.jpeg" alt="Tozan 2023 August Group 4" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-5.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-5.jpeg" alt="Tozan 2023 August Group 5" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-6.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-6.jpeg" alt="Tozan 2023 August Group 6" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-7.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-7.jpeg" alt="Tozan 2023 August Group 7" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-8.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-8.jpeg" alt="Tozan 2023 August Group 8" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-9.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-9.jpeg" alt="Tozan 2023 August Group 9" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-10.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-10.jpeg" alt="Tozan 2023 August Group 10" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-11.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-11.jpeg" alt="Tozan 2023 August Group 11" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-12.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-12.jpeg" alt="Tozan 2023 August Group 12" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-13.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-13.jpeg" alt="Tozan 2023 August Group 13" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-14.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-14.jpeg" alt="Tozan 2023 August Group 14" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-15.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-15.jpeg" alt="Tozan 2023 August Group 15" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-16.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-16.jpeg" alt="Tozan 2023 August Group 16" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-17.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-17.jpeg" alt="Tozan 2023 August Group 17" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-18.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-18.jpeg" alt="Tozan 2023 August Group 18" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-19.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-19.jpeg" alt="Tozan 2023 August Group 19" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-20.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-20.jpeg" alt="Tozan 2023 August Group 20" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-21.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-21.jpeg" alt="Tozan 2023 August Group 21" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-22.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-22.jpeg" alt="Tozan 2023 August Group 22" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-23.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-23.jpeg" alt="Tozan 2023 August Group 23" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-24.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-24.jpeg" alt="Tozan 2023 August Group 24" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-25.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-25.jpeg" alt="Tozan 2023 August Group 25" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-26.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-26.jpeg" alt="Tozan 2023 August Group 26" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-27.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-27.jpeg" alt="Tozan 2023 August Group 27" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-28.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-28.jpeg" alt="Tozan 2023 August Group 28" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-29.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-29.jpeg" alt="Tozan 2023 August Group 29" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
        <div class="gallery-item">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-30.jpeg" class="glightbox" data-gallery="members-&-group-photos">
            <img src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/images/Tozan-2023-August-Group-30.jpeg" alt="Tozan 2023 August Group 30" loading="lazy" />
            <div class="gallery-overlay">
              <i class="bi bi-zoom-in"></i>
            </div>
          </a>
        </div>
      </div>
    </div>

    <!-- Videos -->
    <div class="gallery-category" id="videos">
      <h3 class="category-title">
        <i class="bi bi-play-circle"></i> Videos
        <span class="photo-count">(1 video)</span>
      </h3>
      <div class="gallery-grid">
        <div class="gallery-item video-thumbnail">
          <a href="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/videos/Tozan%202023.mp4" class="glightbox" data-gallery="videos">
            <video poster="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/videos/Tozan%202023.mp4" loading="lazy" muted>
              <source src="https://pub-b6d85dc4453b487d879f35b1669c3da2.r2.dev/videos/Tozan%202023.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
            <div class="gallery-overlay">
              <i class="bi bi-play-circle"></i>
            </div>
          </a>
        </div>
      </div>
    </div>

  </div>

  <!-- Scroll to Top Button -->
  <button class="scroll-top" id="scrollTop">
    <i class="bi bi-arrow-up"></i>
  </button>

  <!-- Audio Element for Background Music -->
  <audio id="backgroundMusic" loop preload="auto" autoplay>
    <source src="assets/sounds/Song of Cathay.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- GLightbox JS -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

  <!-- Gallery Performance System -->
  <script src="assets/js/gallery-performance.js"></script>

  <script>
    // Initialize GLightbox
    const lightbox = GLightbox({
      touchNavigation: true,
      loop: true,
      autoplayVideos: false,
      plyr: {
        config: {
          ratio: '16:9',
          youtube: {
            noCookie: true,
            rel: 0,
            showinfo: 0,
            iv_load_policy: 3
          },
          vimeo: {
            byline: false,
            portrait: false,
            title: false,
            speed: true,
            transparent: false
          }
        }
      }
    });

    // Filter functionality
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        
        // Update active button
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Get filter value
        const filter = btn.getAttribute('data-filter');
        
        // Show/hide categories
        const categories = document.querySelectorAll('.gallery-category');
        categories.forEach(category => {
          if (filter === 'all') {
            category.style.display = 'block';
          } else {
            const categoryId = category.id;
            if (categoryId.includes(filter) || 
                (filter === 'members' && categoryId.includes('members')) ||
                (filter === 'videos' && categoryId.includes('videos'))) {
              category.style.display = 'block';
            } else {
              category.style.display = 'none';
            }
          }
        });
      });
    });

    // Background music functionality
    let musicPlaying = false;
    
    function startMusic() {
      const music = document.getElementById('backgroundMusic');
      if (music && !musicPlaying) {
        music.volume = 0.3; // Set volume to 30%
        music.play().then(() => {
          musicPlaying = true;
          console.log('Background music started');
        }).catch(error => {
          console.log('Could not start background music:', error);
        });
      }
    }

    // Try to start music on user interaction
    document.addEventListener('click', startMusic, { once: true });
    document.addEventListener('touchstart', startMusic, { once: true });

    // Scroll to top functionality
    const scrollTopBtn = document.getElementById('scrollTop');
    
    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        scrollTopBtn.classList.add('visible');
      } else {
        scrollTopBtn.classList.remove('visible');
      }
    });

    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Show gallery immediately when page loads
    document.addEventListener('DOMContentLoaded', () => {
      // Hide loading spinner
      setTimeout(() => {
        document.getElementById('loading').style.display = 'none';
        
        // Start background music
        startMusic();
        
        // Trigger animations
        const categories = document.querySelectorAll('.gallery-category');
        categories.forEach((category, index) => {
          setTimeout(() => {
            category.style.opacity = '1';
            category.style.transform = 'translateY(0)';
          }, index * 100);
        });
      }, 1000);
    });

    // Enhanced performance integration
    window.addEventListener('gallery-performance-ready', (event) => {
      console.log('Gallery Performance System is ready');
      
      // Add memory usage indicator
      const memoryIndicator = document.createElement('div');
      memoryIndicator.className = 'memory-usage-indicator';
      memoryIndicator.textContent = 'Memory: 0MB';
      document.body.appendChild(memoryIndicator);
      
      // Update memory indicator
      setInterval(() => {
        if (window.galleryPerformanceMonitor) {
          const metrics = window.galleryPerformanceMonitor.getMetrics();
          const memoryMB = (metrics.memoryUsage / 1024 / 1024).toFixed(1);
          memoryIndicator.textContent = `Memory: ${memoryMB}MB`;
          
          // Show indicator based on usage
          if (metrics.memoryUsage > 80 * 1024 * 1024) { // 80MB
            memoryIndicator.className = 'memory-usage-indicator critical';
            memoryIndicator.style.display = 'block';
          } else if (metrics.memoryUsage > 50 * 1024 * 1024) { // 50MB
            memoryIndicator.className = 'memory-usage-indicator warning';
            memoryIndicator.style.display = 'block';
          } else {
            memoryIndicator.style.display = 'none';
          }
        }
      }, 5000);
    });

    // Listen for performance reports
    window.addEventListener('gallery-performance-report', (event) => {
      const report = event.detail;
      
      // Update performance stat in header
      if (report.metrics.imageLoadTimes.size > 0) {
        const loadTimes = Array.from(report.metrics.imageLoadTimes.values());
        const avgLoadTime = loadTimes.reduce((sum, time) => sum + time, 0) / loadTimes.length;
        
        console.log(`Performance Report: Avg load time: ${avgLoadTime.toFixed(0)}ms, Cache hit rate: ${(report.metrics.cacheHitRate * 100).toFixed(1)}%`);
      }
    });

    // Smooth scrolling for filter navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Lazy loading enhancement
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src || img.src;
            img.classList.remove('lazy');
            imageObserver.unobserve(img);
          }
        });
      });

      document.querySelectorAll('img[loading="lazy"]').forEach(img => {
        imageObserver.observe(img);
      });
    }
  </script>
</body>

</html>